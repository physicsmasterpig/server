<!-- Improved Attendances page content -->
<style>
    /* Attendances Overview Styles */
    .attendances_overview_container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-bottom: 32px;
    }

    .attendances_overview_wrapper {
        width: 30%;
        height: 60px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 1px solid #22262F;
        border-radius: 10px;
        padding: 20px;
        gap: 15px;
        transition: all 0.3s ease;
    }
    
    .attendances_overview_wrapper:hover {
        background-color: #13161B;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .attendances_overview_wrapper h1 {
        font-size: 18px;
        font-weight: normal;
        color: #545861;
    }
    
    .attendances_overview_wrapper h2 {
        font-size: 24px;
        font-weight: bold;
        color: #FFFFFF;
    }

    /* Class Selection Styles */
    .selection_container {
        margin-bottom: 32px;
    }
    
    .selection_header {
        margin-bottom: 16px;
    }
    
    .selection_header h1 {
        font-size: 16px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 8px;
    }
    
    .selection_header p {
        font-size: 14px;
        color: #94979C;
    }
    
    .selection_content {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }
    
    .selection_dropdown {
        flex: 1;
        position: relative;
    }
    
    .selection_dropdown select {
        width: 100%;
        padding: 12px 16px;
        background-color: #13161B;
        color: #FFFFFF;
        border: 1px solid #22262F;
        border-radius: 10px;
        appearance: none;
        cursor: pointer;
    }
    
    .selection_dropdown::after {
        content: '';
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid #FFFFFF;
        pointer-events: none;
    }
    
    .action_button {
        padding: 12px 20px;
        background-color: #7F56D9;
        color: #FFFFFF;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
    }
    
    .action_button:hover {
        background-color: #6C4CC3;
        transform: translateY(-2px);
    }
    
    .action_button:disabled {
        background-color: #3F3F46;
        cursor: not-allowed;
        opacity: 0.5;
    }
    
    /* Attendance Container Styles */
    .attendance_container {
        width: 100%;
    }
    
    .attendance_header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
    }
    
    .attendance_header h1 {
        font-size: 22px;
        font-weight: 600;
        color: #FFFFFF;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .class_badge {
        padding: 4px 10px;
        background-color: rgba(127, 86, 217, 0.2);
        color: #7F56D9;
        border-radius: 16px;
        font-size: 14px;
        font-weight: normal;
    }
    
    .attendance_actions {
        display: flex;
        gap: 12px;
    }
    
    /* Attendance Stats */
    .attendance_overview {
        margin-bottom: 32px;
    }
    
    .attendance_stats {
        display: flex;
        gap: 20px;
        margin-bottom: 16px;
    }
    
    .stat_item {
        background-color: #13161B;
        border: 1px solid #22262F;
        border-radius: 10px;
        padding: 16px;
        flex: 1;
        display: flex;
        flex-direction: column;
        transition: all 0.3s ease;
    }
    
    .stat_item:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .stat_label {
        color: #94979C;
        font-size: 14px;
        margin-bottom: 8px;
    }
    
    .stat_value {
        color: #FFFFFF;
        font-size: 24px;
        font-weight: 600;
    }
    
    /* Attendance Table Styles */
    .attendance_table_container {
        width: 100%;
        overflow-x: auto;
        margin-bottom: 32px;
    }

    .attendance_table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        color: #FFFFFF;
        background-color: #13161B;
        border: 1px solid #22262F;
        border-radius: 10px;
        overflow: hidden;
    }
    
    .attendance_table thead th {
        padding: 16px;
        text-align: left;
        font-weight: 600;
        background-color: #191D24;
        border-bottom: 1px solid #22262F;
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    .attendance_table thead th.lecture_col {
        min-width: 100px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .attendance_table thead th.lecture_col:hover {
        background-color: #22262F;
    }
    
    .attendance_table tbody tr {
        transition: all 0.2s ease;
    }
    
    .attendance_table tbody tr:hover {
        background-color: #1E2128;
    }
    
    .attendance_table tbody tr:not(:last-child) {
        border-bottom: 1px solid #22262F;
    }
    
    .attendance_table tbody td {
        padding: 16px;
    }
    
    .attendance_table td.student_name {
        font-weight: 500;
        min-width: 150px;
    }

    .attendance_table td.attendance_cell {
        text-align: center;
        width: 60px;
        cursor: pointer;
        position: relative;
    }
    
    .attendance_table td.attendance_cell:hover {
        background-color: #22262F;
    }
    
    .attendance_table td.attendance_rate {
        text-align: center;
        width: 80px;
    }
    
    .status_indicator {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
    } 

    .status_indicator.present {
        background-color: #17B26A;
    }
    
    .status_indicator.late {
        background-color: #F79009;
    }
    
    .status_indicator.absent {
        background-color: #F04438;
    }
    
    .status_indicator.excused {
        background-color: #17B26A;
    }

    .status_indicator.video {
        background-color: #7F56D9;
    }

    .status_indicator.N\/A {
        background-color: #545861;
    }
    
    .rate_display {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 600;
    }
    
    .rate_display.excellent {
        background-color: rgba(23, 178, 106, 0.2);
        color: #17B26A;
    }
    
    .rate_display.good {
        background-color: rgba(23, 178, 106, 0.1);
        color: #17B26A;
    }
    
    .rate_display.average {
        background-color: rgba(247, 144, 9, 0.1);
        color: #F79009;
    }
    
    .rate_display.warning {
        background-color: rgba(247, 144, 9, 0.2);
        color: #F79009;
    }
    
    .rate_display.poor {
        background-color: rgba(240, 68, 56, 0.1);
        color: #F04438;
    }

    /* Add to your CSS */
    .attendance_indicators {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }

    .homework_progress {
        position: relative;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: conic-gradient(
            var(--color) calc(var(--percentage) * 1%),
            #22262F calc(var(--percentage) * 1%)
        );
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .homework_progress::before {
        content: '';
        position: absolute;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background-color: #0C0E12;
    }

    .homework_percentage {
        position: relative;
        font-size: 8px;
        font-weight: bold;
        color: var(--color);
        z-index: 1;
    }

    /* Update the existing attendance_cell to accommodate both elements */
    .attendance_table td.attendance_cell {
        padding: 12px 8px;
        text-align: center;
        width: 60px;
        cursor: pointer;
        position: relative;
    }
    
    /* Lecture Details Section */
    .lecture_details_section {
        margin-top: 40px;
    }
    
    .lecture_details_section h2 {
        color: #FFFFFF;
        font-size: 18px;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid #22262F;
    }
    
    .lecture_list {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }
    
    .lecture_row {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        background-color: #13161B;
        border: 1px solid #22262F;
        border-radius: 10px;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .lecture_row:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .lecture_row.selected {
        border-color: #7F56D9;
        background-color: rgba(127, 86, 217, 0.1);
    }
    
    .lecture_info {
        flex: 2;
    }
    
    .lecture_title {
        font-size: 16px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 4px;
    }
    
    .lecture_date {
        font-size: 14px;
        color: #94979C;
    }
    
    .lecture_stats {
        display: flex;
        gap: 16px;
        flex: 3;
    }
    
    .lecture_stat {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .lecture_stat .stat_label {
        margin-bottom: 4px;
    }
    
    .lecture_stat .stat_value {
        font-size: 16px;
    }
    
    .lecture_stat .stat_value.present {
        color: #17B26A;
    }
    
    .lecture_stat .stat_value.late {
        color: #F79009;
    }
    
    .lecture_stat .stat_value.absent {
        color: #F04438;
    }

    .lecture_stat .stat_value.video {
        color: #7F56D9;
    }
    
    .lecture_stat .stat_value.excused {
        color: #17B26A;
    }
    
    .lecture_stat .stat_value.N\/A {
        color: #545861;
    }
    .edit_button {
        padding: 8px 12px;
        background-color: #7F56D9;
        color: #FFFFFF;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
    }
    
    .edit_button:hover {
        background-color: #6C4CC3;
        transform: translateY(-2px);
    }
    
    /* Empty State */
    .empty_state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 20px;
        background-color: #13161B;
        border: 1px solid #22262F;
        border-radius: 10px;
        text-align: center;
    }
    
    .empty_state svg {
        margin-bottom: 16px;
        color: #545861;
    }
    
    .empty_state h2 {
        font-size: 18px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 8px;
    }
    
    .empty_state p {
        font-size: 14px;
        color: #94979C;
        max-width: 500px;
    }
    
    /* Modal Styles - Improved */
    .modal_overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        backdrop-filter: blur(2px);
    }
    
    .modal_overlay.show {
        display: flex;
        animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .modal_content {
        background-color: #13161B;
        border: 1px solid #22262F;
        border-radius: 10px;
        padding: 24px;
        max-width: 800px;
        width: 90%;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        color: #FFFFFF;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    .modal_header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
    }
    
    .modal_header h2 {
        font-size: 20px;
        font-weight: 600;
        color: #7F56D9;
    }
    
    .modal_close {
        width: 32px;
        height: 32px;
        background: none;
        border: none;
        color: #94979C;
        cursor: pointer;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
    }
    
    .modal_close:hover {
        color: #FFFFFF;
        background-color: rgba(255, 255, 255, 0.1);
    }
    
    .modal_body {
        margin-bottom: 24px;
        flex: 1;
        overflow-y: auto;
    }
    
    .lecture_info {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 1px solid #22262F;
    }
    
    .info_item {
        background-color: #0C0E12;
        border-radius: 8px;
        padding: 12px;
    }
    
    .info_item h3 {
        font-size: 12px;
        color: #94979C;
        margin-bottom: 6px;
        font-weight: normal;
    }
    
    .info_item p {
        font-size: 16px;
        color: #FFFFFF;
        font-weight: 600;
    }
    
    /* Tabs within modal */
    .tab_navigation {
        display: flex;
        border-bottom: 1px solid #22262F;
        margin-bottom: 20px;
    }
    
    .tab_button {
        padding: 12px 20px;
        background: none;
        border: none;
        color: #94979C;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        position: relative;
        transition: all 0.2s ease;
    }
    
    .tab_button.active {
        color: #7F56D9;
    }
    
    .tab_button.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #7F56D9;
    }
    
    .tab_content {
        display: none;
        padding: 10px 0;
        max-height: 400px;
        overflow-y: auto;
    }
    
    .tab_content.active {
        display: block;
        animation: fadeIn 0.3s ease;
    }
    
    /* Student Row Styles */
    .student_row {
        display: flex;
        align-items: center;
        padding: 16px;
        background-color: #0C0E12;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: all 0.3s ease;
    }
    
    .student_row:hover {
        background-color: #1E2128;
    }
    
    .student_row.highlight {
        border: 2px solid #7F56D9;
        animation: pulse 1.5s ease;
    }
    
    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(127, 86, 217, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(127, 86, 217, 0); }
        100% { box-shadow: 0 0 0 0 rgba(127, 86, 217, 0); }
    }
    
    .student_info {
        flex: 1;
    }
    
    .student_name {
        font-size: 16px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 4px;
    }
    
    /* .student_school {
        font-size: 14px;
        color: #94979C;
    } */
    
    .attendance_options {
        display: flex;
        gap: 16px;
    }
    
    .attendance_option {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        padding: 6px 10px;
        border-radius: 6px;
        transition: all 0.2s ease;
    }
    
    .attendance_option:hover {
        background-color: #1E2128;
    }
    
    .attendance_option input[type="radio"] {
        cursor: pointer;
        accent-color: #7F56D9;
        width: 16px;
        height: 16px;
    }
    
    .attendance_option label {
        cursor: pointer;
        font-size: 14px;
    }
    
    .status_text.present {
        color: #17B26A;
    }
    
    .status_text.late {
        color: #F79009;
    }
    
    .status_text.absent {
        color: #F04438;
    }

    .status_text.excused {
        color: #17B26A;
    }

    .status_text.video {
        color: #7F56D9;
    }
    
    .status_text.N\/A {
        color: #545861;
    }
    /* Homework Row Styles */
    .homework_row {
        width: 90%;
        margin-top: 12px;
        padding: 12px;
        background-color: #191D24;
        border-radius: 8px;
    }
    
    .homework_header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }
    
    .homework_title {
        font-size: 14px;
        font-weight: 600;
        color: #FFFFFF;
    }
    
    .homework_inputs {
        display: flex;
        gap: 16px;
    }
    
    .input_group {
        flex: 1;
    }
    
    .input_group label {
        display: block;
        font-size: 12px;
        color: #94979C;
        margin-bottom: 6px;
    }
    
    .input_group input, 
    .input_group select, 
    .input_group textarea {
        width: 100%;
        padding: 10px 12px;
        background-color: #0C0E12;
        border: 1px solid #22262F;
        border-radius: 6px;
        color: #FFFFFF;
        font-size: 14px;
        transition: all 0.2s ease;
    }
    
    .input_group input:focus, 
    .input_group select:focus, 
    .input_group textarea:focus {
        outline: none;
        border-color: #7F56D9;
        box-shadow: 0 0 0 2px rgba(127, 86, 217, 0.2);
    }
    
    .input_group textarea {
        resize: vertical;
        min-height: 60px;
    }
    
    /* Form Actions */
    .modal_footer {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        padding-top: 16px;
        border-top: 1px solid #22262F;
    }
    
    .cancel_button {
        padding: 10px 20px;
        background-color: transparent;
        border: 1px solid #22262F;
        color: #FFFFFF;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
    }
    
    .cancel_button:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }
    
    .save_button {
        padding: 10px 20px;
        background-color: #7F56D9;
        color: #FFFFFF;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
        font-size: 14px;
    }
    
    .save_button:hover {
        background-color: #6C4CC3;
        transform: translateY(-2px);
    }
    
    /* Scrollbar Styles */
    .tab_content::-webkit-scrollbar {
        width: 8px;
    }
    
    .tab_content::-webkit-scrollbar-track {
        background: #0C0E12;
        border-radius: 4px;
    }
    
    .tab_content::-webkit-scrollbar-thumb {
        background: #22262F;
        border-radius: 4px;
    }
    
    .tab_content::-webkit-scrollbar-thumb:hover {
        background: #1E2128;
    }
    
    /* Responsive styles */
    @media (max-width: 1200px) {
        .lecture_stats {
            flex-direction: column;
            gap: 8px;
        }
        
        .lecture_stat {
            flex-direction: row;
            justify-content: space-between;
        }
    }
    
    @media (max-width: 992px) {
        .attendance_table_container {
            overflow-x: auto;
        }
        
        .attendances_overview_container {
            flex-direction: column;
        }
        
        .attendances_overview_wrapper {
            width: 100%;
        }
        
        .lecture_row {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .lecture_stats {
            flex-direction: row;
            width: 100%;
            margin: 10px 0;
        }
        
        .edit_button {
            align-self: flex-end;
        }
    }
    
    @media (max-width: 768px) {
        .attendance_options {
            flex-direction: column;
            gap: 8px;
        }
        
        .modal_content {
            width: 95%;
            max-height: 90vh;
        }
        
        .homework_inputs {
            flex-direction: column;
        }
        
        .selection_content {
            flex-direction: column;
        }
    }
</style>

<div class="attendances_overview_container">
    <div class="attendances_overview_wrapper">
        <h1>Active classes</h1>
        <h2 id="active-classes-count">0</h2>
    </div>
    <div class="attendances_overview_wrapper">
        <h1>Total attendance</h1>
        <h2 id="total-attendance-count">0</h2>
    </div>
    <div class="attendances_overview_wrapper">
        <h1>Homework completion</h1>
        <h2 id="homework-completion-rate">0%</h2>
    </div>
</div>

<div class="selection_container">
    <div class="selection_header">
        <h1>Select class and lecture</h1>
        <p>Choose a class to view attendance overview, then select a lecture to edit attendance records</p>
    </div>
    <div class="selection_content">
        <div class="selection_dropdown">
            <select id="class-select">
                <option value="" disabled selected>Select a class</option>
                <!-- Classes will be populated dynamically -->
            </select>
        </div>
        <div class="selection_dropdown">
            <select id="lecture-select" disabled>
                <option value="" disabled selected>Select a lecture</option>
                <!-- Lectures will be populated based on selected class -->
            </select>
        </div>
        <button id="view-attendance-btn" class="action_button" disabled>Edit Attendance</button>
    </div>
</div>

<div class="attendance_container">
    <div id="attendance-content">
        <!-- Empty state by default -->
        <div class="empty_state">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 6.75H7.75C6.64543 6.75 5.75 7.64543 5.75 8.75V17.25C5.75 18.3546 6.64543 19.25 7.75 19.25H16.25C17.3546 19.25 18.25 18.3546 18.25 17.25V8.75C18.25 7.64543 17.3546 6.75 16.25 6.75H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 8.25H10C9.44772 8.25 9 7.80228 9 7.25V5.75C9 5.19772 9.44772 4.75 10 4.75H14C14.5523 4.75 15 5.19772 15 5.75V7.25C15 7.80228 14.5523 8.25 14 8.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9.75 12.25H14.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9.75 15.75H14.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h2>No attendance data selected</h2>
            <p>Select a class above to view attendance overview</p>
        </div>
    </div>
</div>

<!-- Edit Attendance Modal -->
<div id="edit-attendance-modal" class="modal_overlay">
    <div class="modal_content">
        <div class="modal_header">
            <h2>Manage Attendance & Homework</h2>
            <button class="modal_close">&times;</button>
        </div>
        <div class="modal_body">
            <div class="lecture_info">
                <div class="info_item">
                    <h3>Class</h3>
                    <p id="modal-class-name">Class Name</p>
                </div>
                <div class="info_item">
                    <h3>Lecture</h3>
                    <p id="modal-lecture-topic">Lecture Topic</p>
                </div>
                <div class="info_item">
                    <h3>Date</h3>
                    <p id="modal-lecture-date">YYYY-MM-DD</p>
                </div>
            </div>
            
            <div class="tab_navigation">
                <button class="tab_button active" data-tab="attendance">Attendance</button>
                <button class="tab_button" data-tab="homework">Homework</button>
            </div>
            
            <div id="attendance-tab" class="tab_content active">
                <!-- Students attendance will be populated here -->
                <div id="attendance-students-container">
                    <!-- Student rows will be generated dynamically -->
                </div>
            </div>
            
            <div id="homework-tab" class="tab_content">
                <!-- Homework settings -->
                <div class="homework_settings" style="margin-bottom: 20px; padding: 16px; background-color: #191D24; border-radius: 8px;">
                    <div class="form_group">
                        <label for="total-problems" style="display: block; margin-bottom: 8px; color: #94979C; font-size: 14px;">Total Problems</label>
                        <input type="number" id="total-problems" min="1" value="10" style="width: 100px; padding: 8px; background-color: #0C0E12; border: 1px solid #22262F; border-radius: 6px; color: #FFFFFF;">
                        <small style="display: block; margin-top: 6px; color: #94979C; font-size: 12px;">This setting applies to all students in this lecture</small>
                    </div>
                </div>
                
                <!-- Students homework will be populated here -->
                <div id="homework-students-container">
                    <!-- Student homework rows will be generated dynamically -->
                </div>
            </div>
        </div>
        <div class="modal_footer">
            <button class="cancel_button">Cancel</button>
            <button class="save_button">Save Changes</button>
        </div>
    </div>
</div>